<!DOCTYPE html>
<html lang="pt"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
  <title>Cadastrar Comanda</title>
</head>
<body>
<section layout:fragment="corpo">

  <div class="container mt-4">

    <!-- Nome do cliente responsável -->
    <h2 th:text="'Comanda de: ' + (${comanda.responsavel != null ? comanda.responsavel.nome : 'Selecione um cliente'})">
      Comanda
    </h2>


    <!-- Form principal -->
    <form th:action="@{/comandas/salvar}" th:object="${comanda}" method="post">

      <!-- Campo hidden para o cliente responsável -->
      <input type="hidden" th:field="*{responsavel}"/>

      <!-- Tabela de itens -->
      <table class="table table-bordered mt-3">
        <thead>
        <tr>
          <th>Data</th>
          <th>Quantidade</th>
          <th>Item</th>
          <th>Valor Unitário</th>
          <th>Total Parcial</th>
          <th>Nome Consumidor</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td><input type="date" name="itens[0].data" class="form-control"/></td>
          <td><input type="number" min="1" name="itens[0].quantidade" class="form-control"/></td>
          <td>
            <select name="itens[0].itemSelecionado" class="form-select">
              <option value="">-- Selecione --</option>
              <option th:each="i : ${itens}"
                      th:value="${i.tipo + '-' + i.id}"
                      th:text="${i.tipo + ': ' + i.nome}">
              </option>
            </select>


          </td>
          <td><input type="number" step="0.01" name="itens[0].valor" class="form-control"/></td>
          <td><span>0</span></td>
          <td><input type="text" name="itens[0].nomeConsumidor" class="form-control"/></td>
        </tr>
        </tbody>

      </table>

      <!-- Botão salvar -->
      <div class="mt-3">
        <button type="submit" class="btn btn-primary">Salvar Comanda</button>
      </div>

    </form>

  </div>

</section>
</body>
</html>
